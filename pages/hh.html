<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Executer & Method</title>
    <link rel="stylesheet" href="../style.css">
</head>

<body>
    <main>
        <h1 id="executers-and-methods">Executer &amp; Method</h1>
        <p>Bảng các executer và method hỗ trợ, mô tả chi tiết từng method.</p>
        <h2>RETURN: điều khiển kết quả trả về</h2>
        <table class="doc-table">
            <thead>
                <tr>
                    <th>Method</th>
                    <th>with</th>
                    <th>Kết quả</th>
                    <th>Mô tả</th>
                    <th>Chú ý</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>return.PASS</b></td>
                    <td>
                        <pre>
<b>- test_item_value:</b> giá trị, có thể bỏ qua
                        </pre>
                    </td>
                    <td>PASS</td>
                    <td>
                        Dùng để kết thúc test_item với kết quả PASS. Bỏ qua các bước tiếp theo trong test_item
                    </td>
                    <td>
                        - Nếu test_item có lower_limit hoặc upper_limit là
                        số, sẽ tự check test_item_value với limit,
                        nếu quá limit sẽ trả về {tên item}_TO_LOW hoặc tên {item}_TO_HIGH
                    </td>
                </tr>
                <tr>
                    <td><b>return.FAIL</b></td>
                    <td>
                        <pre>
<b>- error_code:</b> tên lỗi
<b>- more_infomation:</b> chi tiết, có thể bỏ qua
<b>- test_item_value:</b>giá trị trả về, có thể bỏ qua
                        </pre>
                    </td>
                    <td>FAIL</td>
                    <td>
                        Dùng để kết thúc test_item với kết quả FAIL và ghi mã lỗi. Bỏ qua các bước tiếp theo trong
                        test_item.
                    </td>
                    <td>Mã lỗi nên đề là UPPER_CASE_WITH_UNDERSCORES.</td>
                </tr>
            </tbody>
        </table>

        <h2>mes: giao tiếp với MES</h2>
        <table class="doc-table">
            <thead>
                <tr>
                    <th>Method</th>
                    <th>with</th>
                    <th>Kết quả</th>
                    <th>Mô tả</th>
                    <th>Chú ý</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>mes</b> - giao tiếp với MES</td>
                    <td><b>mes.is_online</b></td>
                    <td>~</td>
                    <td>true false</td>
                    <td>Trả về on_success nếu chương trình chạy mode PRODUCTION, và ngược lại.</td>
                    <td></td>
                </tr>
                <tr>
                    <td><b>mes.CHECK_MBS_NO</b></td>
                    <td>~</td>
                    <td>PASS FAIL</td>
                    <td>Kiểm tra đầu vào MBSNO. Mọi trạm test qua MES đều cần.</td>
                    <td>Nếu chế độ là OFFLINE => trả về PASS.</td>
                </tr>
                <tr>
                    <td><b>mes.GET_CSN</b></td>
                    <td>~</td>
                    <td>PASS FAIL</td>
                    <td>
                        Lấy giá trị CSN của MBSNO từ MES và lưu vào context với tên MES[csn]
                    </td>
                    <td>Chế độ OFFLINE sẽ lỗi</td>
                </tr>
                <tr>

                    <td><b>mes.GET_CONTROL_TABLE</b></td>
                    <td>~</td>
                    <td>PASS FAIL</td>
                    <td>Lấy thông tin guankongbiao từ MES và lưu vào context lần lượt với tên
                        MES[{tên biến}]
                    </td>
                    <td>Chế độ OFFLINE sẽ lỗi. Liên hệ với MES để lấy các trường thông tin cần thiết.</td>
                </tr>
                <tr>
                    <td><b>mes.GET_PTID</b></td>
                    <td>~</td>
                    <td>PASS FAIL</td>
                    <td>Lấy PTID theo MBSNO</td>
                    <td>Chế độ OFFLINE sẽ lỗi. Dành cho các trạm cần lấy thông tin PTID.</td>
                </tr>
                <tr>
                    <td><b>mes.GET_MAC_LIST</b></td>
                    <td>~</td>
                    <td>PASS FAIL</td>
                    <td>Lấy một MAC mới hoặc MAC đã được ghép với MBSNO từ MES và lưu vào context với
                        tên MES[mac]
                    </td>
                    <td>
                        Chế độ OFFLINE sẽ lỗi. Dành cho các trạm cần ghi BT_MAC, WIFI_MAC, hoặc ETH_MAC mà cần lấy MAC
                        mới từ MES.
                    </td>
                </tr>
                <tr>
                    <td><b>mes.GET_MAC_LIST_EX</b></td>
                    <td>~</td>
                    <td>PASS FAIL</td>
                    <td>Lấy danh sách MAC và lưu vào context. Cần liên hệ MES để có thể lấy được MAC.</td>
                    <td>Chế độ OFFLINE sẽ lỗi. Dành cho các trạm cần ghi BT_MAC, WIFI_MAC, hoặc ETH_MAC mà cần lấy MAC
                        mới từ MES.
                        hoặc ETH_MAC mà cần lấy MAC mới từ MES.
                    </td>
                </tr>
                <tr>
                    <td><b>mes.GET_CONTROL_TABLE</b></td>
                    <td>~</td>
                    <td>PASS FAIL</td>
                    <td>Lấy danh sách thông tin guankongbiao từ MES và lưu vào context lần lượt với tên
                        MES[{tên biến}]
                    </td>
                    <td>Chế độ OFFLINE sẽ lỗi. Dành cho các trạm cần lấy thông tin guankongbiao để so sánh.
                    </td>
                </tr>
                <tr>
                    <td><b>mes.GET_VARIABLES_BY_STATION_JSON</b></td>
                    <td>~</td>
                    <td>PASS FAIL</td>
                    <td>Lấy các biến MES cung cấp xuống. Thường sẽ dùng cái này để lấy imei. Do MES cung cấp.</td>
                    <td>Chế độ OFFLINE sẽ lỗi. Dành cho các trạm cần ghi BT_MAC, WIFI_MAC,
                        hoặc ETH_MAC mà cần lấy MAC mới từ MES.
                    </td>
                </tr>
                <tr>
                    <td><b>mes.GET_VARIABLES_CHECK_JSON</b></td>
                    <td>~</td>
                    <td>PASS FAIL</td>
                    <td>- API mes cung cấp lấy giá trị 1 biến.</td>
                    <td>Chế độ OFFLINE sẽ lỗi.</td>
                </tr>

                <tr>
                    <td><b>mes.SAVE_VARIABLE_IGNORE_NON_SETTING_JSON</b></td>
                    <td>
                        <pre>
<b>- var_name:</b> tên biến.
<b>- var_value:</b> giá trị biến.
                        </pre>
                    </td>
                    <td>PASS FAIL</td>
                    <td>- API mes cung cấp đặt giá trị cho 1 biến.</td>
                    <td>Chế độ OFFLINE sẽ lỗi.</td>
                </tr>

                <tr>
                    <td><b>mes.SAVE_VARIABLES_BY_STATION_JSON</b></td>
                    <td>
                        <pre>
<b>- var_name:</b> tên biến.
<b>- var_value:</b> giá trị biến.
                        </pre>
                    </td>
                    <td>PASS FAIL</td>
                    <td>- API mes cung cấp đặt giá trị cho 1 biến.</td>
                    <td>Chế độ OFFLINE sẽ lỗi.</td>
                </tr>

                <tr>
                    <td><b>mes.GET_NEW_IMEI</b></td>
                    <td>~</td>
                    <td>PASS FAIL</td>
                    <td>Lấy một IMEI mới từ MES và lưu vào context với tên MES[imei]</td>
                    <td>Chế độ OFFLINE sẽ lỗi. Dành cho các trạm cần ghi IMEI mới lấy từ MES.</td>
                </tr>

                <tr>
                    <td><b>mes.GET_IMEI_FROM_SNO_CODE</b></td>
                    <td>~</td>
                    <td>PASS FAIL</td>
                    <td>Lấy một IMEI mới từ MES và lưu vào context với tên MES[imei]</td>
                    <td>Chế độ OFFLINE sẽ lỗi. Dành cho các trạm cần ghi IMEI mới lấy từ MES.</td>
                </tr>

                <tr>
                    <td><b>mes.UPLOAD_BT_MAC</b></td>
                    <td>
                        <pre>
<b>- mac:</b> MAC 
                    </pre>
                    </td>
                    <td>PASS FAIL</td>
                    <td>Upload BT MAC đã ghi lên MES.</td>
                    <td>Chế độ OFFLINE sẽ lỗi. Dành cho các trạm cần upload BT MAC lên MES. <b>&lt;MAC&gt;</b>
                        đã đượcđọc và lưu vào <b>context</b> ở item trước đó.
                    </td>
                </tr>

                <tr>
                    <td><b>mes.UPLOAD_WIFI_MAC</b></td>
                    <td>
                        <pre>
<b>- mac:</b> MAC 
                    </pre>
                    </td>
                    <td>PASS FAIL</td>
                    <td>Upload WIFI MAC đã ghi lên MES.</td>
                    <td>
                        Chế độ OFFLINE sẽ lỗi. Dành cho các trạm cần upload WIFI MAC lên MES. MAC đã được đọc và lưu vào
                        context ở item trước đó.
                    </td>
                </tr>

                <tr>
                    <td><b>mes.UPLOAD_ETH_MAC</b></td>
                    <td>
                        <pre>
<b>- mac:</b> MAC
                    </pre>
                    </td>
                    <td>PASS FAIL</td>
                    <td>Upload ETH MAC đã ghi lên MES.</td>
                    <td>Chế độ OFFLINE sẽ lỗi. Dành cho các trạm cần upload ETH MAC lên MES.
                        MAC đã được đọc và lưu vào context ở item trước đó.
                    </td>
                </tr>
        </table>

        <h2>logger: ghi log</h2>
        <table class="doc-table">
            <thead>
                <tr>
                    <th>Method</th>
                    <th>with</th>
                    <th>Kết quả</th>
                    <th>Mô tả</th>
                    <th>Chú ý</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>logger.info</b></td>
                    <td>
                        <pre>
 <b>- message:</b> chuỗi cần log.
                    </pre>
                    </td>
                    <td>true</td>
                    <td>Ghi một thông điệp ở mức INFO vào log.</td>
                    <td>chuỗi có thể là chuỗi tĩnh hoặc sử dụng String Resolve để tạo chuỗi động.</td>
                </tr>
            </tbody>
        </table>

        <h2>com: giao tiếp cổng COM</h2>
        <table class="doc-table">
            <thead>
                <tr>
                    <th>Method</th>
                    <th>with</th>
                    <th>Kết quả</th>
                    <th>Mô tả</th>
                    <th>Chú ý</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>com.open</b></td>
                    <td>
                        <pre>
<b>- name:</b> tên định danh.
<b>- port:</b> tên cổng.
<b>- baudrate:</b> tốc độ baud.
                    </pre>
                    </td>
                    <td>true</td>
                    <td>Mở kết nối đến cổng COM.</td>
                    <td>tên định danh dùng để tham chiếu cổng COM này trong các lệnh tiếp theo.</td>
                </tr>

                <tr>
                    <td><b>com.close</b></td>
                    <td>
                        <pre>
<b>- name:</b> tên định danh.
                    </pre>
                    </td>
                    <td>true</td>
                    <td>Đóng kết nối đến cổng COM.</td>
                    <td>- Chương trình sẽ tự đóng cổng COM tự động. Cần dùng khi cần kiểm soát đóng cổng COM để thực
                        hiện lệnh tiếp theo.
                    </td>
                </tr>

                <tr>
                    <td><b>com.wait_bytes_count</b></td>
                    <td>
                        <pre>
<b>- name: </b> tên định danh.
<b>- expect_count: </b> số byte.
<b>- timeout: </b> thời gian chờ (s).
                    </pre>
                    </td>
                    <td>true false</td>
                    <td>Chờ đến khi có đủ số byte nhận được từ cổng COM.</td>
                    <td>Trả về false nếu vượt quá thời gian chờ.</td>
                </tr>

                <tr>
                    <td><b>com.wait_string</b></td>
                    <td>
                        <pre>
<b>- name: </b> tên định danh.
<b>- expect: </b> chuỗi mong đợi.
<b>- timeout: </b> thời gian chờ (s).
                    </pre>
                    </td>
                    <td>true false</td>
                    <td>Chờ đến khi nhận được chuỗi mong đợi từ cổng COM.</td>
                    <td>
                        <pre> - Trả về false nếu vượt quá thời gian chờ.
- <b>expect</b>: dùng chuỗi string hoặc `re_expression` để khớp với một biểu thức chính quy.
                    </pre>
                    </td>
                </tr>

                <tr>
                    <td><b>com.send_string</b></td>
                    <td>
                        <pre>
<b>- name: </b> tên định danh.
<b></b>- command: </b> chuỗi gửi.
<b>- sleep: </b> thời gian delay sau khi gửi (s)
                    </pre>
                    </td>
                    <td>true</td>
                    <td>Gửi một chuỗi đến cổng COM.</td>
                    <td>- Gửi enter bằng cách sử dụng `\r\n`</td>
                </tr>

                <tr>
                    <td><b>com.send_wait</b></td>
                    <td>
                        <pre>
<b>- name: </b> tên định danh.
<b></b>- command: </b> chuỗi gửi.
<b>- retry_times: </b> số lần retry.
<b>- expect: </b> chuỗi mong đợi.
<b>- timeout: </b> thời gian chờ (s).
                        </pre>
                    </td>
                    <td>true false</td>
                    <td>Gửi một chuỗi đến cổng COM và chờ phản hồi mong đợi.</td>
                    <td>
                        <pre>
Trả về false nếu không thành công.
- <b>expect</b>: dùng chuỗi string hoặc `re_expression` để khớp với một biểu thức chính quy.
                        </pre>
                    </td>
                </tr>

                <tr>
                    <td><b>com.check_log</b></td>
                    <td>
                        <pre>
<b>- name:</b> tên định danh.
<b>- expect:</b> chuỗi mong đợi.
                        </pre>
                    </td>
                    <td>true false</td>
                    <td>Kiểm tra xem chuỗi mong đợi có xuất hiện trong log nhận được từ cổng COM hay không.</td>
                    <td>
                        <pre>Trả về false nếu không tìm thấy.
- <b>expect</b>: dùng chuỗi string hoặc `re_expression` để khớp với một biểu thức chính quy.
                    </pre>
                    </td>
                </tr>

                <tr>
                    <td><b>com.read_value</b></td>
                    <td>
                        <pre>
<b>- name:</b> tên định danh.
<b>- expect:</b> chuỗi mong đợi.
<b>- match_index:</b> index của chuỗi match cần lấy.
<b>- replace:</b> chuỗi cần thay thế.
<b>- replace_with:</b> giá trị thay thế.
<b>- var_name:</b> tên biến lưu giá trị.
                    </pre>
                    </td>
                    <td>true false</td>
                    <td>Đọc một giá trị từ log nhận được và lưu vào <b>context</b>.</td>
                    <td>
                        <pre>Trả về false nếu không tìm thấy.
- <b>expect</b>: dùng chuỗi string hoặc `re_expression` để khớp với một biểu thức chính quy.
- <b>index</b>: vị trí nhóm cần lấy.
- <b>replace</b>: dùng trực tiếp regex.
- <b>replace_with</b>: dùng chuỗi string.
                    </pre>
                    </td>
                </tr>

                <tr>
                    <td><b>com.wait_check</b></td>
                    <td>
                        <pre>
<b>- name:</b> tên định danh.
<b> expect_wait:</b>- chuỗi mong đợi.
<b>- expect_check:</b> chuỗi kiểm tra.
- <b>- timeout:</b> thời gian chờ (s).
                    </pre>
                    </td>
                    <td>true false</td>
                    <td>Chờ đến khi nhận được chuỗi mong đợi và kiểm tra chuỗi kiểm tra có xuất hiện trong log hay
                        không.
                    </td>
                    <td>
                        <pre>Trả về false nếu không thành công.
- <b>expect_wait</b>, <b>expect_check</b>: dùng chuỗi string hoặc `re_expression` để khớp với một biểu thức chính quy.
                    </pre>
                    </td>
                </tr>

                <tr>
                    <td><b>com.clear_log</b></td>
                    <td>
                        <pre>
<b>- name: </b> tên định danh.
                    </pre>
                    </td>
                    <td>true</td>
                    <td>- Xóa log tạm của com hiện tại. Thường dùng với `read_value`,
                        `check_log` phía trên.
                    </td>
                </tr>
            </tbody>
        </table>
        <hr>

        <h2>dialog: hiển thị hộp thoại</h2>
        <table class="doc-table">
            <thead>
                <tr>
                    <th>Method</th>
                    <th>with</th>
                    <th>Kết quả</th>
                    <th>Mô tả</th>
                    <th>Chú ý</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>func.sleep</b></td>
                    <td>- time: &lt;thời gian (s)&gt;</td>
                    <td>true</td>
                    <td>Tạm dừng một khoảng thời gian.</td>
                </tr>
                <tr>
                    <td><b>dialog.show</b></td>
                    <td>- title: &lt;tiêu đề&gt;<br>- message: &lt;nội dung&gt;</td>
                    <td>true</td>
                    <td>Hiển thị một hộp thoại thông báo và chờ xác nhận OK.</td>

                </tr>
                <tr>
                    <td><b>dialog.confirm</b></td>
                    <td>- title: &lt;tiêu đề&gt;<br>- message: &lt;nội dung&gt;</td>
                    <td>true false</td>
                    <td>Hiển thị một hộp thoại xác nhận và chờ người dùng chọn <b>YES/OK</b> hoặc
                        <b>No/Cancel</b>.
                    </td>
                </tr>
                <tr>
                    <td><b>dialog.input</b></td>
                    <td>- title: &lt;tiêu đề&gt;<br>- message: &lt;nội dung&gt;<br>- var_name: &lt;tên biến lưu giá
                        trị&gt;
                    </td>
                    <td>true</td>
                    <td>Hiển thị một hộp thoại nhập liệu và lưu giá trị nhập vào vào <b>context</b>.</td>
                </tr>
                <tr>

                    <td><b>dialog.show_with_auto_close</b></td>
                    <td>- title: &lt;tiêu đề&gt;<br>- message: &lt;nội dung&gt;<br>- timeout: &lt;thời gian hiển
                        thị&gt;
                    </td>
                    <td>true</td>
                    <td>Hiển thị một hộp thoại thông báo và chờ xác nhận OK, sẽ tự thoát sau thời gian timeout.</td>
                </tr>
            </tbody>
        </table>
        <hr>


        <h2>func: các hàm tuỳ chỉnh</h2>
        <table class="doc-table">
            <thead>
                <tr>
                    <th>Method</th>
                    <th>with</th>
                    <th>Kết quả</th>
                    <th>Mô tả</th>
                    <th>Chú ý</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>func.check_context_key_exist</b></td>
                    <td>- key: &lt;tên key&gt;</td>
                    <td>true false</td>
                    <td>Kiểm tra xem trong context có key đó không.</td>
                    <td>- Thông thường, dùng hàm này khi lấy thông tin trên MES. Và kiểm tra xem có trường thông tin
                        được
                        trả về không. Cần dùng khi xác định luôn lỗi là bên MES. Nếu k dùng, k sao cả.</td>
                </tr>
                <tr>
                    <td><b>func.date_time_check</b></td>
                    <td>- prod_date_time: &lt;thời gian CẦN so sánh&gt;<br>- prod_date_time_format: &lt;định dạng
                        thời gian
                        của prod_date_time (theo C#)&gt;<br>- prod_date_time_utc: &lt;dùng khi giờ sản phẩm là giờ
                        UTC&gt;<br>- source: &lt;nguồn, chọn pc | mes&gt;<br>- duration: &lt;khoảng thời gian cho
                        phép sai
                        lệch (s)&gt;</td>
                    <td>true false</td>
                    <td>Kiểm tra ngày giờ có nằm trong khoảng thời gian cho phép không.</td>
                    <td>- Định dạng thời gian theo chuẩn C# datetime. Ví dụ: dddd/MM/yyyy HH:mm:ss</td>
                </tr>
                <tr>
                    <td><b>func.date_check</b></td>
                    <td>- prod_date_time: &lt;thời gian CẦN so sánh&gt;<br>- prod_date_time_format: &lt;định dạng
                        thời gian
                        của prod_date_time (theo C#)&gt;<br>- source: &lt;nguồn, chọn pc | mes&gt;</td>
                    <td>true false</td>
                    <td>Kiểm tra ngày có có khớp không.</td>
                    <td>- Định dạng thời gian theo chuẩn C# datetime. Ví dụ: dddd/MM/yyyy HH:mm:ss</td>
                </tr>
                <tr>
                    <td><b>func.string_match</b></td>
                    <td>- source: &lt;nguồn&gt;<br>- expect: &lt;giá trị mong đợi&gt;</td>
                    <td>true false</td>
                    <td>Kiểm tra xem giá trị nguồn có chứa chuỗi mong đợi hay không</td>
                    <td><b>expect</b>: dùng chuỗi string hoặc <b>re_&lt;expression&gt;</b> để khớp với
                        một biểu
                        thức chính quy.</td>
                </tr>
                <tr>
                    <td><b>func.read_value</b></td>
                    <td>- source: &lt;nguồn&gt;<br>- expect: &lt;chuỗi mong đợi&gt;<br>- match_index: &lt;index của
                        chỗi
                        match cần lấy&gt;<br>- replace: &lt;chuỗi cần thay thế&gt;<br>replace_with: &lt;giá trị thay
                        thế&gt;<br>- convert: &lt;to_lower, to_upper&gt;<br>- var_name: &lt;tên biến lưu giá trị&gt;
                    </td>
                    <td>true false</td>
                    <td>Đọc một giá trị từ log nhận được và lưu vào <b>context</b>.</td>
                    <td>- Trả về <b>false</b> nếu không tìm thấy.<br>- <b>expect</b>: dùng chuỗi string
                        hoặc
                        <b>re_&lt;expression&gt;</b> để khớp với một biểu thức chính quy.<br>-
                        <b>index</b>: vị
                        trí nhóm cần lấy<br>- <b>replace</b>: dùng trực tiếp regex<br>-
                        <b>replace_with</b>:
                        dùng chuỗi string
                    </td>
                </tr>
                <tr>
                    <td><b>func.reverse_string</b></td>
                    <td>- source: &lt;nguồn chuỗi dữ liệu&gt;<br>- var_name: &lt;tên biến để lưu vào context&gt;
                    </td>
                    <td>true</td>
                    <td>Đảo ngược chuỗi dữ liệu từ nguồn và lưu vào biến trong <b>context</b>.</td>
                    <td>- Đảo ngược chuỗi, vì dụ <b>abcde</b> -> <b>edcba</b></td>
                </tr>
                <tr>
                    <td><b>func.reverse_mac</b></td>
                    <td>- source: &lt;nguồn chuỗi dữ liệu&gt;<br>- var_name: &lt;tên biến để lưu vào context&gt;
                    </td>
                    <td>true</td>
                    <td>Đảo ngược chuỗi mac đọc từ lệnh AT</td>
                    <td>- Đảo ngược chuỗi mac, vì dụ <b>6f5d4e3c2b1a</b> -> <b>1a2b3c4d5e6f</b></td>
                </tr>
                <tr>
                    <td><b>func.get_imei_from_response</b></td>
                    <td>- source: &lt;nguồn chuỗi dữ liệu&gt;<br>- var_name: &lt;tên biến để lưu vào context&gt;
                    </td>
                    <td>true</td>
                    <td>Convert chuỗi text thành IMEI. Dùng cho sử dụng lệnh adb
                        <b>adb shell service call iphonesubinfo 3 i32 0</b>
                    </td>
                </tr>
                <tr>
                    <td><b>func.cm5_picture_measure</b></td>
                    <td>- lower_limit: &lt;giá trị dưới&gt;<br>- upper_limit: &lt;giá trị trên&gt;<br>-
                        picture_name:
                        &lt;tên ảnh&gt;<br>- golden_sample_folder_path: &lt;đường dẫn đến thư mục GOLDEN SAMPLE&gt;
                    </td>
                    <td>true false</td>
                    <td>Tính MSE ảnh cho trạm CM5 CAMERA</td>
                    <td>- <b>picture_name</b> lấy tên ảnh và định dạng, ví dụ <b>FRONT_LIGHT_ON.jpg</b>
                    </td>
                </tr>
                <tr>
                    <td><b>func.generate_imei2_from_imei1</b></td>
                    <td>- imei1: &lt;giá trị imei1&gt;</td>
                    <td>true</td>
                    <td>Tính giá trị imei2 từ imei1 (2 imei sẽ liên tiếp nhau) và lưu vào
                        <b>context["PROD[imei2]"]</b>
                    </td>
                    <td>- <b>imei1</b> phải là imei 15 ký tự.</td>
                </tr>
                <tr>
                    <td><b>func.check_com_device_exist</b></td>
                    <td>- com_name: &lt;tên cổng com&gt;</td>
                    <td>true false</td>
                    <td>Kiểm tra xem có cổng com xuất hiện không. Cho UX300. Kiểm tra cổng com dạng
                        <b>USB Serial Device</b> trên device manager
                    </td>
                </tr>
            </tbody>
        </table>
        <hr>


        <h2>if: hàm thực hiện logic</h2>
        <table class="doc-table">
            <thead>
                <tr>
                    <th>Method</th>
                    <th>with</th>
                    <th>Kết quả</th>
                    <th>Mô tả</th>
                    <th>Chú ý</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>if.condition</b></td>
                    <td>- condition: &lt;biểu thức điều kiện&gt;</td>
                    <td>true false</td>
                    <td>Thực hiện kiểm tra logic điều kiện (Phương thức này cũ rồi, dùng bên dưới dễ sử dụng hơn)
                    </td>
                    <td>- Trả về <b>false</b> nếu lệnh CMD lỗi hoặc timeout, trả về <b>true</b> nếu lệnh
                        CMD
                        thành công.</td>
                </tr>
                <tr>
                    <td><b>if.is_equal</b></td>
                    <td>- source: &lt;giá trị cần so sánh&gt;<br>- expect: &lt;giá trị mong muốn&gt;</td>
                    <td>true false</td>
                    <td>Kiểm tra điều kiện <b>source == expect</b>. Lưu ý là kiểm tra cho số, k kiểm tra cho
                        chuỗi
                        string, nếu chuỗi string dùng <b>func.string_match</b></td>
                </tr>
                <tr>
                    <td><b>if.is_greater_than</b></td>
                    <td>- source: &lt;giá trị cần so sánh&gt;<br>- lower_limit: &lt;giá trị so sánh&gt;</td>
                    <td>true false</td>
                    <td>Kiểm tra điều kiện <b>source &gt; lower_limit</b>.</td>
                </tr>
                <tr>
                    <td><b>if.is_greater_than_or_equal</b></td>
                    <td>- source: &lt;giá trị cần so sánh&gt;<br>- lower_limit: &lt;giá trị so sánh&gt;</td>
                    <td>true false</td>
                    <td>Kiểm tra điều kiện <b>source &gt;= lower_limit</b>.</td>
                </tr>
                <tr>
                    <td><b>if.is_less_than</b></td>
                    <td>- source: &lt;giá trị cần so sánh&gt;<br>- upper_limit: &lt;giá trị so sánh&gt;</td>
                    <td>true false</td>
                    <td>Kiểm tra điều kiện <b>source &lt; upper_limit</b>.</td>
                </tr>
                <tr>
                    <td><b>if.is_less_than_or_equal</b></td>
                    <td>- source: &lt;giá trị cần so sánh&gt;<br>- upper_limit: &lt;giá trị so sánh&gt;</td>
                    <td>true false</td>
                    <td>Kiểm tra điều kiện <b>source &lt; upper_limit</b>.</td>
                </tr>
                <tr>
                    <td><b>if.in_between</b></td>
                    <td>- source: &lt;giá trị cần so sánh&gt;<br>- lower_limit: &lt;giá trị so sánh&gt;<br>-
                        upper_limit:
                        &lt;giá trị so sánh&gt;</td>
                    <td>true false</td>
                    <td>Kiểm tra điều kiện <b>source &gt;= lower_limit &amp; source &lt;= upper_limit</b>.
                    </td>
                </tr>
            </tbody>
        </table>
        <hr>

        <h2>Các hàm thao tác với phần mềm thứ 3</h2>
        <table class="doc-table">
            <thead>
                <tr>
                    <th>Method</th>
                    <th>with</th>
                    <th>Kết quả</th>
                    <th>Mô tả</th>
                    <th>Chú ý</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>atmel.AUTO</b></td>
                    <td>- working_path: đường dẫn chuong trình AtmelSecureAccess.</td>
                    <td>PASS FAIL</td>
                    <td>Sử dụng tool AtmelSecureAccess flash key vào sản phẩm. Dùng cho UX100/UX110</td>
                    <td>- Config để tự tải tool AtmelSecureAccess xuống. Ở lần tải đầu tiên. Cần configuration
                        AtmelSecureAccess ở thư mục tải về.</td>
                </tr>
                <tr>
                    <td><b>icimei.AUTO</b></td>
                    <td>- working_path: &lt;đường dẫn thư mục chứa chương trình&gt;<br>- comport: &lt;cổng com để
                        ghi
                        imei&gt;<br>- imei: &lt;imei ghi vào (độ dài là 15)&gt;</td>
                    <td>PASS FAIL</td>
                    <td>Sử dụng tool <b>icimie.exe</b> ghi imei vào sản phẩm.</td>
                    <td>- Config để tự tải tool xuống.<br>- trước khi chạy tool sản phẩm cần được vào chế độ AT
                        trước.</td>
                </tr>
                <tr>
                    <td><b>icimei.auto</b></td>
                    <td>- working_path: &lt;đường dẫn thư mục chứa chương trình&gt;<br>- comport: &lt;cổng com để
                        ghi
                        imei&gt;<br>- imei: &lt;imei ghi vào (độ dài là 15)&gt;</td>
                    <td>true false</td>
                    <td>Tương tự <b>AUTO</b>, nhưng sẽ thực hiện <b>on_success</b> nếu thành công, ngược
                        lại
                        thực hiện <b>on_fail</b>. Lưu ý: Chỉ lỗi <b>ICIMEI_TIMEOUT</b> và
                        <b>ICIMEI_WRITE_IMEI_FAIL</b> mới trả về <b>true</b> <b>false</b>. Lỗi
                        khác sẽ
                        <b>FAIL</b>
                    </td>
                    <td>- Config để tự tải tool xuống.<br>- trước khi chạy tool sản phẩm cần được vào chế độ AT
                        trước.
                    </td>
                </tr>
                <tr>
                    <td><b>jlink.AUTO</b></td>
                    <td>- working_path: đường dẫn chuong trình AtmelSecureAccess.<br>- project_path: &lt;đường dẫn
                        chứa file
                        project&gt;<br>- flash_file_path: &lt;đường dẫn chứa file .bin<br>- usb_sn: &lt;usb_sn của
                        jlink&gt;
                    </td>
                    <td>PASS FAIL</td>
                    <td>Sử dụng tool JFlash flash bootloader vào sản phẩm.</td>
                    <td>- Config để tự tải tool JLink và file project, bin xuống. Đối với USB_SN, nếu cần nhiều cổng
                        thì đặt
                        USB cố định. Nếu muốn tự động thì để là ~</td>
                </tr>
                <tr>
                    <td><b>mib.AUTO</b></td>
                    <td>- customer_pn: &lt;PN&gt;<br>- customer_pn: &lt;bomver&gt;<br>- sn: &lt;CSN&gt;<br>- ptid:
                        &lt;PTID&gt;<br>- wifi_mac: &lt;WIFI_MAC&gt;<br>- bt_mac: &lt;BT_MAC&gt;<br>- lan_mac:
                        &lt;LAN_MAC&gt;<br>- uwb_mac: &lt;UWB_MAC&gt;</td>
                    <td>PASS FAIL</td>
                    <td>Tự động chạy TOOL MIB sử dụng thông tin các trường cung cấp.</td>
                    <td>- Tool <b>MIB</b> và <b>WinConnect</b> cần được mở và config thủ công trước khi
                        chạy.<br>- Nếu trường nào không sử dụng, để giá trị nó là <b>NA</b></td>
                </tr>
                <tr>
                    <td><b>mt.AUTO</b></td>
                    <td>- working_path: &lt;đường dẫn thư mục làm việc&gt;<br>- exe_name: &lt;tên file thực
                        thi&gt;<br>-
                        ict_sn_01: &lt;serial number cho board 1&gt;<br>- ict_sn_02: &lt;serial number cho board
                        2&gt;</td>
                    <td>PASS FAIL</td>
                    <td>Tự động chạy tool MT (ManufactoringTool.exe) với các tham số đã cho.</td>
                    <td>Lưu ý:<br>- exe_path lấy bản PCBA_tests.exe<br>- ict_sn_01, ict_sn_02 nếu không dùng để null
                        (~),
                        nếu sử dụng dùng $context input_str<br>- Sử dụng kèm các method check bên dưới để kiểm tra
                        kết quả
                        test</td>
                </tr>
                <tr>
                    <td><b>mt.check_log</b></td>
                    <td>- expect: &lt;chuỗi mong đợi&gt;</td>
                    <td>true false</td>
                    <td>Kiểm tra xem chuỗi mong đợi có xuất hiện trong log của tool MT hay không.</td>
                    <td>- Trả về <b>false</b> nếu không tìm thấy.<br>- <b>expect</b>: dùng chuỗi string
                        hoặc
                        <b>re_&lt;expression&gt;</b> để khớp với một biểu thức chính quy.
                    </td>
                </tr>
                <tr>
                    <td><b>mt.check_board_log</b></td>
                    <td>- board_id: &lt;id của board&gt;<br>- expect: &lt;chuỗi mong đợi&gt;</td>
                    <td>true false</td>
                    <td>Kiểm tra xem chuỗi mong đợi có xuất hiện trong log của board cụ thể trong tool MT hay không.
                    </td>
                    <td>- Trả về <b>false</b> nếu không tìm thấy.<br>- <b>expect</b>: dùng chuỗi string
                        hoặc
                        <b>re_&lt;expression&gt;</b> để khớp với một biểu thức chính quy.
                    </td>
                </tr>
                <tr>
                    <td><b>mt.check_tasklist</b></td>
                    <td>- board_id: &lt;id của board&gt;<br>- expect: &lt;chuỗi mong đợi&gt;</td>
                    <td>true false</td>
                    <td>Kiểm tra xem chuỗi mong đợi có xuất hiện trong tasklist của board cụ thể trong tool MT hay
                        không.
                    </td>
                    <td>- Trả về <b>false</b> nếu không tìm thấy.<br>- <b>expect</b>: dùng chuỗi string
                        hoặc
                        <b>re_&lt;expression&gt;</b> để khớp với một biểu thức chính quy.
                    </td>
                </tr>
                <tr>
                    <td><b>pms.AUTO</b></td>
                    <td>- working_path: &lt;đường dẫn thư mục làm việc&gt;<br>- exe_name: &lt;tên file thực
                        thi&gt;<br>-
                        bt_mac: &lt;địa chỉ mac bluetooth&gt;<br>- wifi_mac: &lt;địa chỉ mac wifi&gt;<br>- eth_mac:
                        &lt;địa
                        chỉ mac ethernet&gt;</td>
                    <td>PASS FAIL</td>
                    <td>Tự động chạy tool PMS (PMS_Simulation_Window_V1.09.exe) với các tham số đã cho.</td>
                    <td>Lưu ý:<br>- exe_path lấy bản PMS_Simulation_Window_V1.09.exe<br>- bt_mac, wifi_mac, eth_mac
                        nếu
                        không dùng để null (~)</td>
                </tr>
                <tr>
                    <td><b>qcm.AUTO</b></td>
                    <td>- imei: &lt;imei ghi vào, thường là $context MES[imei]&gt;</td>
                    <td>PASS FAIL</td>
                    <td>Ghi IMEI vào thiết bị sử dụng tool QCMWriteImei.exe</td>
                    <td>- Chương trình <b>QCMWriteImei</b> cần được ĐĂNG NHẬP VÀ MỞ BẰNG TAY.<br></td>
                </tr>
                <tr>
                    <td><b>qcm.auto</b></td>
                    <td>- imei: &lt;imei ghi vào, thường là $context MES[imei]&gt;</td>
                    <td>true false</td>
                    <td>Ghi IMEI vào thiết bị sử dụng tool QCMWriteImei.exe. Tương tự như <b>AUTO</b> nhưng không
                        thoát
                        ngay.</td>
                    <td>- Chương trình <b>QCMWriteImei</b> cần được ĐĂNG NHẬP VÀ MỞ BẰNG TAY.<br>- Sử dụng khi cần
                        thoát màn
                        hình <b>AT</b> bằng cách thêm một vài lệnh ở <b>on_success</b> và
                        <b>on_fail</b>.<br>- Lưu ý: GHI NHẬN tool <b>QCMWriteImei</b> bug khi fail, COM vãn bị
                        sử dụng
                        nên k gửi lệnh thoát được.
                    </td>
                </tr>
                <tr>
                    <td><b>qfil.AUTO</b></td>
                    <td>- working_path: đường dẫn QFIL.<br>- comport: cổng COM để FLASH, sử dụng 1, 2 3 thay vì
                        COM1, COM2
                        COM3. Để null nếu chỉ dùng 1 slot<br>- image_path: đường dẫn thư mục chứa image .mbn<br>-
                        timeout:
                        &lt;thời gian chờ tối đa (s)&gt;</td>
                    <td>PASS FAIL</td>
                    <td>Flash image vào thiết bị sử dụng tool QFIL.</td>
                    <td>- Nên configure để QFIL tự tải về và dùng luôn QFIL đã được tải về đó.</td>
                </tr>
                <tr>
                    <td><b>qwit.AUTO</b></td>
                    <td>- working_path: &lt;đường dẫn thư mục chứa chương trình&gt;<br>- exe_name: &lt;tên chương
                        trình&gt;<br>- imei: &lt;imei ghi vào (độ dài là 15)&gt;</td>
                    <td>PASS FAIL</td>
                    <td>Sử dụng tool <b>Quectel_Write_IMEI_OFFLINE_V1.8.1.exe</b> ghi imei vào sản phẩm.</td>
                    <td>- Config để tự tải tool xuống.<br>- trước khi chạy tool sản phẩm cần được vào chế độ AT
                        trước. Để
                        giá trị mặc định <b>exe_name: Quectel_Write_IMEI_OFFLINE_V1.8.1.exe</b></td>
                </tr>
                <tr>
                    <td><b>vtp.AUTO</b></td>
                    <td>- working_path: đường dẫn thư mục chứa VTP.exe<br>- exe_name: tên file thực thi VTP.exe<br>-
                        xml_name: tên script xml vtp cần chạy<br>- timeout: thời gian chờ tối đa (s)</td>
                    <td>PASS FAIL</td>
                    <td>Tự động chạy tool VTP với các tham số đã cho.</td>
                    <td>- Nên configure vtp để tự tải xuống.<br>- Đảm bảo tool vtp có thê chạy bình thường. Chú ý số
                        SN_LENGTH ở vtp phải là 14</td>
                </tr>
            </tbody>
        </table>
        <hr>


        <h2>cmd: thưc thi lệnh CMD và lấy log</h2>
        <table class="doc-table">
            <thead>
                <tr>
                    <th>Method</th>
                    <th>with</th>
                    <th>Kết quả</th>
                    <th>Mô tả</th>
                    <th>Chú ý</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>cmd.execute</b></td>
                    <td>- name: tên lệnh<br>- command: lệnh thực thi - working_path: thư mục thực thi lệnh<br>-
                        timeout:
                        thời gian timeout của lệnh</td>
                    <td>true false</td>
                    <td>Thực thi lệnh CMD và lấy log trả về</td>
                    <td>- Trả về <b>false</b> nếu lệnh thực thi lỗi hoặc timeout.<br>- Log của lệnh được lưu
                        vào
                        <b>context</b> với tên <b>CMD[&lt;name&gt;][log]</b>
                    </td>
                </tr>
                </tr>
            </tbody>
        </table>
        <hr>

        <h2>cam:Tương tác với <b>CAMERA</b></h2>
        <table class="doc-table">
            <thead>
                <tr>
                    <th>Method</th>
                    <th>with</th>
                    <th>Kết quả</th>
                    <th>Mô tả</th>
                    <th>Chú ý</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>cam.set_operation_image</b></td>
                    <td>- image_path: đường dẫn file ảnh mẫu</td>
                    <td>true</td>
                    <td>Thiết lập ảnh thao tác</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td><b>cam.check_ocr_string</b></td>
                    <td>- wait_string: Chuỗi OCR mong đợi.<br>- timeout: Thời gian chờ (s)<br>-
                        save_image_with_name: tên
                        file lưu chữ ảnh chụp.<br>- expect: Chuỗi kiểm tra mong đợi</td>
                    <td>true false</td>
                    <td>Đọc text từ ảnh camera, đợi <b>wait_string</b> xuất hiện, sau đó kiểm tra
                        <b>wait_string</b> có chứa <b>expect</b> hay không.
                    </td>
                    <td>- Trả về <b>false</b> nếu không tìm thấy.<br>- <b>wait_string</b> &amp;
                        <b>expect</b>: dùng chuỗi string hoặc <b>re_&lt;expression&gt;</b> để khớp với
                        một biểu
                        thức chính quy.<br>- <b>save_image_with_name</b>: Lưu ảnh đã được xử lý OCR lại, nếu k
                        lưu thì
                        để là null <b>~</b>
                    </td>
                </tr>
                <tr>
                    <td><b>cam.get_ocr_string</b></td>
                    <td>- wait_string: Chuỗi OCR mong đợi.<br>- timeout: Thời gian chờ (s)<br>-
                        save_image_with_name: tên
                        file lưu chữ ảnh chụp.<br>- var_name: tên biến sẽ được lưu vào <b>context</b></td>
                    <td>true false</td>
                    <td>Đọc text từ ảnh camera, đợi <b>wait_string</b> xuất hiện, sau đó lưu chuỗi
                        <b>wait_string</b> vào <b>context</b> với tên <b>var_name</b>.
                    </td>
                    <td>- Trả về <b>false</b> nếu không tìm thấy.<br>- <b>wait_string</b>: dùng chuỗi
                        string
                        hoặc <b>re_&lt;expression&gt;</b> để khớp với một biểu thức chính quy.<br>-
                        <b>save_image_with_name</b>: Lưu ảnh đã được xử lý OCR lại, nếu k lưu thì để là null
                        <b>~</b>
                    </td>
                </tr>
                <tr>
                    <td><b>cmd</b> - thưc thi lệnh CMD và lấy log</td>
                    <td><b>cmd.execute</b></td>
                    <td>- name: tên lệnh<br>- command: lệnh thực thi - working_path: thư mục thực thi lệnh<br>-
                        timeout:
                        thời gian timeout của lệnh</td>
                    <td>true false</td>
                    <td>Thực thi lệnh CMD và lấy log trả về</td>
                    <td>- Trả về <b>false</b> nếu lệnh thực thi lỗi hoặc timeout.<br>- Log của lệnh được lưu
                        vào
                        <b>context</b> với tên <b>CMD[&lt;name&gt;][log]</b>
                    </td>
                </tr>
            </tbody>
        </table>

        <h2>cam: Tương tác với <b>CAMERA</b></h2>
        <table class="doc-table">
            <thead>
                <tr>
                    <th>Method</th>
                    <th>with</th>
                    <th>Kết quả</th>
                    <th>Mô tả</th>
                    <th>Chú ý</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>cam.set_operation_image</b></td>
                    <td>
                        <pre>
<b>- image_path:</b> đường dẫn file ảnh mẫu
                </pre>
                    </td>
                    <td>true</td>
                    <td>Thiết lập ảnh thao tác cho camera.</td>
                    <td>-</td>
                </tr>

                <tr>
                    <td><b>cam.check_ocr_string</b></td>
                    <td>
                        <pre>
<b>- wait_string:</b> chuỗi OCR mong đợi
<b>- timeout:</b> thời gian chờ (giây)
<b>- save_image_with_name:</b> tên file lưu ảnh OCR
<b>- expect:</b> chuỗi kiểm tra mong đợi
                </pre>
                    </td>
                    <td>true / false</td>
                    <td>
                        Đọc text từ ảnh camera, chờ <b>wait_string</b> xuất hiện,
                        sau đó kiểm tra <b>wait_string</b> có chứa <b>expect</b> hay không.
                    </td>
                    <td>
                        - Trả về <b>false</b> nếu không tìm thấy.<br>
                        - <b>wait_string</b>, <b>expect</b>: dùng string hoặc
                        <b>re_&lt;expression&gt;</b> (regex).<br>
                        - <b>save_image_with_name</b>: lưu ảnh OCR đã xử lý,
                        không lưu thì để <b>~</b>.
                    </td>
                </tr>

                <tr>
                    <td><b>cam.get_ocr_string</b></td>
                    <td>
                        <pre>
<b>- wait_string:</b> chuỗi OCR mong đợi
<b>- timeout:</b> thời gian chờ (giây)
<b>- save_image_with_name:</b> tên file lưu ảnh OCR
<b>- var_name:</b> tên biến lưu vào context
                </pre>
                    </td>
                    <td>true / false</td>
                    <td>
                        Đọc text từ ảnh camera, chờ <b>wait_string</b> xuất hiện,
                        sau đó lưu chuỗi vào <b>context</b> với tên <b>var_name</b>.
                    </td>
                    <td>
                        - Trả về <b>false</b> nếu không tìm thấy.<br>
                        - <b>wait_string</b>: dùng string hoặc
                        <b>re_&lt;expression&gt;</b> (regex).<br>
                        - <b>save_image_with_name</b>: lưu ảnh OCR đã xử lý,
                        không lưu thì để <b>~</b>.
                    </td>
                </tr>
            </tbody>
        </table>
    </main>
</body>

</html>